{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/Services/indexed-db.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/table\";\nimport * as i6 from \"@angular/material/paginator\";\nfunction OtlistComponent_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \"Name\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OtlistComponent_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ot_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ot_r12.patientName);\n  }\n}\nfunction OtlistComponent_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \"Date\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OtlistComponent_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ot_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ot_r13.operationDate);\n  }\n}\nfunction OtlistComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \"Time\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OtlistComponent_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ot_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ot_r14.operationTime);\n  }\n}\nfunction OtlistComponent_th_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \"Doctor Name\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OtlistComponent_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ot_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ot_r15.doctorName);\n  }\n}\nfunction OtlistComponent_th_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \"Action\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OtlistComponent_td_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function OtlistComponent_td_18_div_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ot_r16 = i0.ɵɵnextContext().$implicit;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.editOt(ot_r16.id));\n    });\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function OtlistComponent_td_18_div_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ot_r16 = i0.ɵɵnextContext().$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.deleteOt(ot_r16.id));\n    });\n    i0.ɵɵtext(4, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OtlistComponent_td_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13);\n    i0.ɵɵtemplate(1, OtlistComponent_td_18_div_1_Template, 5, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isSuperAdmin);\n  }\n}\nfunction OtlistComponent_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 18);\n  }\n}\nfunction OtlistComponent_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 19);\n  }\n}\nconst _c0 = function () {\n  return [5, 10, 15, 20];\n};\nexport let OtlistComponent = /*#__PURE__*/(() => {\n  class OtlistComponent {\n    constructor(router, indexedDbService) {\n      this.router = router;\n      this.indexedDbService = indexedDbService;\n      this.displayedColumns = [];\n      this.dataSource = new MatTableDataSource();\n      this.total = 0;\n      this.isSuperAdmin = false;\n    }\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.indexedDbService.getItem('loginUser').then(loginUser => {\n          this.isSuperAdmin = loginUser === 'admin';\n          this.displayedColumns = ['patientName', 'operationDate', 'operationTime', 'doctorName'];\n          if (this.isSuperAdmin) {\n            this.displayedColumns.push('action');\n          }\n          this.loadDataFromIndexedDB();\n        });\n      });\n    }\n    loadDataFromIndexedDB() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const data = yield this.indexedDbService.getItem('otFormData');\n        if (data) {\n          const records = Array.isArray(data) ? data : [data];\n          this.dataSource.data = records;\n          this.total = records.length;\n        } else {\n          this.dataSource.data = [];\n          this.total = 0;\n        }\n      });\n    }\n    editOt(patientId) {\n      this.router.navigate(['/home'], {\n        queryParams: {\n          patientId\n        }\n      });\n    }\n    deleteOt(index) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const data = yield this.indexedDbService.getItem('otFormData');\n        if (data) {\n          const updated = data.filter((_, i) => i !== index);\n          yield this.indexedDbService.setItem('otFormData', updated);\n          this.dataSource.data = updated;\n          this.total = updated.length;\n        }\n      });\n    }\n  }\n  OtlistComponent.ɵfac = function OtlistComponent_Factory(t) {\n    return new (t || OtlistComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.IndexedDbService));\n  };\n  OtlistComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OtlistComponent,\n    selectors: [[\"app-otlist\"]],\n    decls: 22,\n    vars: 7,\n    consts: [[1, \"body\"], [\"mat-table\", \"\", \"multiTemplateDataRows\", \"\", 1, \"patient-table\", \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"patientName\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"operationDate\"], [\"matColumnDef\", \"operationTime\"], [\"matColumnDef\", \"doctorName\"], [\"matColumnDef\", \"action\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [1, \"page\", 3, \"length\", \"pageSize\", \"pageSizeOptions\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"class\", \"action-buttons\", 4, \"ngIf\"], [1, \"action-buttons\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function OtlistComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2, \"OT Medicine Patient List\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"table\", 1);\n        i0.ɵɵelementContainerStart(4, 2);\n        i0.ɵɵtemplate(5, OtlistComponent_th_5_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(6, OtlistComponent_td_6_Template, 2, 1, \"td\", 4);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(7, 5);\n        i0.ɵɵtemplate(8, OtlistComponent_th_8_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(9, OtlistComponent_td_9_Template, 2, 1, \"td\", 4);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(10, 6);\n        i0.ɵɵtemplate(11, OtlistComponent_th_11_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(12, OtlistComponent_td_12_Template, 2, 1, \"td\", 4);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(13, 7);\n        i0.ɵɵtemplate(14, OtlistComponent_th_14_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(15, OtlistComponent_td_15_Template, 2, 1, \"td\", 4);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(16, 8);\n        i0.ɵɵtemplate(17, OtlistComponent_th_17_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(18, OtlistComponent_td_18_Template, 2, 1, \"td\", 4);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(19, OtlistComponent_tr_19_Template, 1, 0, \"tr\", 9);\n        i0.ɵɵtemplate(20, OtlistComponent_tr_20_Template, 1, 0, \"tr\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"mat-paginator\", 11);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"length\", ctx.total)(\"pageSize\", 5)(\"pageSizeOptions\", i0.ɵɵpureFunction0(6, _c0));\n      }\n    },\n    dependencies: [i3.NgIf, i4.MatButton, i5.MatTable, i5.MatHeaderCellDef, i5.MatHeaderRowDef, i5.MatColumnDef, i5.MatCellDef, i5.MatRowDef, i5.MatHeaderCell, i5.MatCell, i5.MatHeaderRow, i5.MatRow, i6.MatPaginator],\n    styles: [\".body[_ngcontent-%COMP%]{margin:10px 20px;padding:20px 30px;overflow-x:auto}.patient-table[_ngcontent-%COMP%]{width:100%;min-width:600px;border-collapse:collapse}.patient-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .patient-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;white-space:nowrap}.mat-header-cell[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#000}.table-btn[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.page[_ngcontent-%COMP%]{margin:20px auto;display:flex;justify-content:center}@media screen and (max-width: 840px){.patient-table[_ngcontent-%COMP%]{min-width:unset;font-size:13px}.patient-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .patient-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}}\"]\n  });\n  return OtlistComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}